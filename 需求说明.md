# QC小组活动图表工具 (Smart QC Chart Tools) 需求说明书

## 1. 产品概述
### 1.1 定位
本工具是一款专为 QC (Quality Control) 小组活动设计的智能化图表生成与逻辑分析应用。旨在解决传统 QC 活动中图表制作繁琐、格式不规范、数据计算易出错等痛点，提供"零门槛"的专业图表制作体验。

### 1.2 核心价值
-   **专业规范**: 严格遵循 QC 活动准则，自动生成符合评审要求的图表（如排列图的双轴比例、控制图的 3σ 线）。
-   **简单高效**: 通过预制的数据模板，实现"填空即出图"，无需学习复杂的 Excel 公式或专业绘图软件。
-   **逻辑赋能**: 为非数值类的逻辑分析（如原因分析）提供结构化的交互绘图工具，辅助思维展开。

---

## 2. 功能模块详情

### 2.1 数据中心 (Data Center)
作为所有图表的数据入口，提供统一、便捷的数据录入体验。
-   **预制模板**: 针对每种图表提供标准化的录入表格（类 Excel 界面）。
    -   *例如*: 排列图模板包含"不合格项目"、"频数"两列；控制图模板包含"样本号"、"观测值"等。
-   **智能交互**:
    -   支持从 Excel/WPS 直接复制粘贴数据。
    -   支持 `.xlsx` / `.csv` 文件导入。
    -   除必要数据外，系统自动计算中间值（如累计频率、平均值、极差），无需用户手动计算。

### 2.2 统计图表工场 (Statistics Factory)
专注于**数据驱动**的图表生成，解决"老七种"及"新七种"工具中的定量分析需求。

| 图表类型 | 核心功能与计算逻辑 | 视觉规范 |
| :--- | :--- | :--- |
| **排列图 (Pareto Chart)** | - 自动计算累计频率。<br>- 自动排序（从高到低）。<br>- 支持设置"其他"项（自动合并低频项）。 | - 双 Y 轴（左频数，右频率）。<br>- 自动绘制二八原则分析线（可选）。 |
| **直方图 (Histogram)** | - 自动计算极差(R)、确定组数(k)和组距(h)。<br>- 生成频数分布表。 | - 柱体紧密排列。<br>- 支持叠加标准正态分布曲线。<br>- 标注规格公差界限 (T_U, T_L)。 |
| **控制图 (Control Chart)** | - 支持常用类型: X-bar R, X-bar S, P图, pn图, c图, u图。<br>- 自动计算 UCL, CL, LCL。<br>- **自动判异**: 识别并标记"出界"、"连续上升/下降"等异常点。 | - 清晰的三线（UCL/CL/LCL）标注。<br>- 异常点高亮显示。 |
| **散布图 (Scatter Plot)** | - 自动进行回归分析。<br>- 计算相关系数 r，判断相关性强弱。 | - 绘制回归直线。<br>- 显示回归方程。 |
| **雷达图 (Radar Chart)** | - 支持多维度指标对比（活动前 vs 活动后）。 | - 填充色半透明叠加，清晰展示效果提升幅度。 |

### 2.3 逻辑图表工场 (Logic Factory)
专注于**非数据类**的逻辑梳理与原因分析，提供高度交互的绘图体验。

#### A. 鱼骨图 (Fishbone Diagram) - 原因分析
-   **交互模式**: **思维导图式**。
    -   用户以"主骨"（问题）为核心，通过快捷键或拖拽添加"大骨"、"中骨"、"小骨"。
    -   支持节点拖拽调整位置，系统自动维持鱼骨形态的布局。
-   **从属关系**: 严格限制为"末端因素"指向"原因"，"原因"指向"结果"。

#### B. 关联图 (Interrelationship Diagraph) - 复杂原因分析
-   **交互模式**: **关系定义式**。
    -   **步骤 1**: 输入"问题组"和"原因组"（作为节点池）。
    -   **步骤 2**: 定义连线关系（A 导致 B）。
-   **智能辅助**:
    -   **自动布局**: 算法自动优化节点位置，减少连线交叉。
    -   **自动识别**: 
        -   **末端因素**: 自动识别并高亮"只出不进"的节点（通常标黄）。
        -   **主要问题**: 自动识别并高亮"只进不出"的节点（通常标红）。

#### C. 系统图 (Tree Diagram) - 手段展开
-   **交互模式**: **层级展开式** (组织结构图风格)。
    -   根节点（目标） -> 一级手段（即下级目标） -> 二级手段 -> ... -> 最终对策。
-   **布局切换**: 支持"左-右"横向展开或"上-下"纵向展开。
-   **对策评价**: 不仅是绘图，支持在末级手段后挂接"评价表"（可行性、经济性等打分）。

---

## 3. 非功能与技术需求

### 3.1 用户体验
-   **所见即所得**: 修改数据或拖拽节点时，画布实时更新。
-   **一键导出**: 
    -   支持 PNG/JPG 高清位图。
    -   支持 SVG 矢量图（方便插入 Word/PPT 不失真）。
    -   背景自适应（透明或白底）。

### 3.2 技术架构
-   **平台**: Web 应用 (基于浏览器，无须安装，跨平台)。
-   **前端框架**: Next.js (React)。
-   **图表引擎**: 
    -   统计图: **ECharts** (强大的统计绘图能力)。
    -   逻辑图: **G6** 或 **React Flow** (处理复杂的图布局与交互)。