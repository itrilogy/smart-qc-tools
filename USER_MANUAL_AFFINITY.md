# 《Smart QC Tools 亲和图 (KJ法) 模块》使用手册
**（软件著作权申请建议参考文档版本）**

---

## 1. 软件概述

### 1.1 软件名称及版本
**软件名称**：Smart QC Tools 工业级质量控制软件  
**版本号**：V1.0  
**功能模块**：亲和图/KJ法逻辑分析模块 (Smart Affinity Module)

### 1.2 开发背景与用途
亲和图（KJ法）是质量管理中用于处理语言性、模糊性信息的非量化工具。本模块解决了传统手工制图调整难、无法在不同展示风格间切换的痛点。通过首创的 **“Straddle-Layout” (跨界排版)** 技术，实现了标题与边框的完美交织，广泛用于跨部门头脑风暴、复杂质量问题分类、客户需求挖掘等定性分析场景。

---

## 2. 软件运行环境
（详见通用说明）

---

## 3. 核心功能及操作规程

### 3.1 双模态实时切换 (Dual-Mode Rendering)
**功能描述**：同一套逻辑数据支持在“结构化路径”与“分区化容器”间无缝切换。

**操作规程**：
1. **树状模式 (Label Mode)**：在控制面板点击“树状”。该模式强调因果流转，每个节点由直角折线连接，垂直或水平生长。适合展示清晰的从属关系。
2. **卡片模式 (Card Mode)**：点击“卡片”模式。该模式采用嵌套边框设计，强调空间包含关系。每个上级分类都被视为一个“底盘(Plate)”，这种模式视觉密度更高，更具现代工业设计感。

### 3.2 动态留白管理 (Adaptive Spacing Engine)
**功能描述**：打破固定布局限制，赋予用户对图表呼吸感的控制权。

**操作规程**：
- **微调间距**：在控制面板找到 **“视觉间距 (px)”** 输入框（默认 12px）。
- **逻辑响应**：
  - 加大数值可让图表更松散，适合汇报展示。
  - 减小数值可让图表更紧凑，适合处理超大规模复杂分类（如 4 级以上嵌套）。
- **算法细节**：当间距改变时，系统会自动计算底板标题的宽度（保持 100% 容器宽度减去固定边距），并自适应重排所有子项。

### 3.3 深度 DSL 描述语法
**语法规范**：
- `# [文字]`：最高级别分类（Root/Group）。
- `##`、`###`、`####`：分别代表二级、三级、四级嵌套原因或细节。
- `Layout: [Horizontal/Vertical]`：控制生长方向。
- `itemGap: [Number]`：控制核心间距。

---

## 4. 技术特性亮点

1. **跨层级层叠算法**：解决了在 Canvas 绘图模式下处理深层 `children` 递归时的性能开销，确保在 6 级以上嵌套时仍能流畅交互。
2. **容器自适应拉伸**：根据内部文字的数量和长度，底板会自动横向或纵向延申，拒绝文字重叠。
3. **专业色彩平衡系统**：预置了工业级配色方案（深蓝、阳光橙、冷灰），确保导出的报告具备直接演示的品质。

---
*版本日期：2026年1月*  
* Smart QC Tools 亲和图研发组 归档*
