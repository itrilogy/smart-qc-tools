# 《Smart QC Tools 鱼骨图模块》使用手册
**（软件著作权申请建议参考文档版本）**

---

## 1. 软件概述

### 1.1 软件名称及版本
**软件名称**：Smart QC Tools 工业级质量控制软件  
**版本号**：V1.0  
**功能模块**：鱼骨图分析模块（核心模块）

### 1.2 开发背景与用途
本软件针对传统鱼骨图软件操作繁琐、无法处理深层因果嵌套、缺乏智能化推理能力等痛点而开发。旨在为质量管理人员提供一种基于 **DSL (领域专用语言)** 描述和 **AI (人工智能)** 驱动的、具备高度自动化布局能力的因果分析工具。广泛应用于制造业故障分析、系统稳定性分析及商务逻辑梳理。

---

## 2. 软件运行环境

### 2.1 硬件环境
- **处理器**：双核 2.0GHz 或更高
- **内存**：4GB 以上
- **硬盘**：可用空间 1GB 以上

### 2.2 软件环境
- **操作系统**：Windows 10/11, macOS, Linux (通用 Web 架构)
- **内核驱动**：Node.js Web 渲染引擎
- **浏览器**：Chrome 90+, Edge, Safari (推荐使用现代主流浏览器)

---

## 3. 核心功能及操作规程

### 3.1 模块界面入口
进入系统后，点击导航栏 “Fishbone Analysis” 进入鱼骨图分析主界面。界面分为左右两部分：左侧为控制面板（编辑器/AI 助手），右侧为实时渲染画布。

---

### 3.2 DSL 语法编辑器操作 (DSL Editor)
**功能描述**：采用自研结构化脚本语言，通过文本符号直接指挥图表生成。

**操作步骤**：
1. **主轴标题定义**：在编辑器首行输入 `Title: [文字]`，设置鱼骨图的最终分析目标（即鱼头方向）。
2. **原因层级录入**：
   - 使用单个 `#` 开头定义“大骨”（一级分类，如：人员、设备）。
   - 使用 `##` 开头定义“中骨”（二级原因）。
   - 使用 `###` 开头定义“小骨”（三级详情），最高支持 6 级递归深度。
3. **样式指令配置**：
   - 输入 `Color[Start]: #1d4ed8` 可自定义改变鱼头颜色。
   - 输入 `Color[BoneLine]: #ef4444` 可改变脊椎骨线条颜色。

---

### 3.3 AI 推理生成操作 (AI Reasoning Hub)
**功能描述**：基于大模型语义识别，自动将非结构化文字描述转化为逻辑严密的鱼骨图结构。

**操作步骤**：
1. 切换控制面板顶部的标签至 **“AI 推理生成”**。
2. 在“问题描述”框内输入您的具体场景（如：“分析网站访问变慢的原因”）。
3. 点击 **“AI 推理生成”** 按钮。
4. 系统将根据 `chart_spec.json` 配置的 Prompt 模板，执行语义推理，并自动将生成的 DSL 代码回填并即时渲染出图。

---

### 3.4 动态画布交互功能 (Interactive Canvas)
**功能描述**：具备工业级自动布局算法，支持即时动态整理。

**操作指南**：
- **多级递归布局算法 (Depth-First Layout)**：解决了传统绘图工具在处理深层分支时极易出现的“重叠”与“空间分配不均”问题。系统通过深度优先搜索逻辑，为每一级分支预留其所有子孙节点所需的包络空间，并动态计算重心偏移，实现视觉上的完美平衡。
- **自动布局整理**：点击工具栏的 **“整理布局”** 按钮。系统将触发自研的递归位移算法，自动校正因节点过多导致的图形重叠、文字碰撞或空间失衡。

---

### 3.5 高阶 AI 交互细节 (Advanced AI Prompting)
**操作规范**：
- **场景描述建议**：建议使用“背景+现状+目标”的结构进行输入。例如：“我是一名制造工程师，目前 L1 产线的产品良率下降了 3%，主要集中在周三下午。请帮我从人机料法环角度分析可能的原因。”
- **语义解析深度**：AI 在解析时不仅提取关键词，还能自动推测原因间的因果链路。例如，它能识别出“员工疲劳”可能是由于“加班时长增加”引起的，并在 DSL 中自动生成父子嵌套关系。

---

### 3.5 成果导出功能 (Export Center)
**功能描述**：支持多格式工业级矢量数据导出。

**操作步骤**：
1. **白底 PNG 图片**：适合导出后直接放入 PPT 或 Word 文档。
2. **透明 PNG 图片**：适合在各类设计软件中叠加使用，保留透明背景。
3. **PDF 文件**：点击“PDF 文件”按钮，导出矢量级的 PDF 文档，支持高清无损放大打印。

---

## 4. 技术特性亮点（申办要点建议）

- **原创递归 DSL 解析引擎**：实现了从文本符号到复杂树形拓扑结构的线性时间级解析（O(n)），具备极高的扩展性和容错能力。
- **六级递归动态平衡排布算法**：针对工业级复杂系统工程设计，确保大规模因果图譜在有限的画布空间内清晰可辨。
- **语义即逻辑 (Semantic to Logic Mapping)**：通过 LLM 深度定制的 Prompt 协议，实现了从口语化描述到标准化质量工程逻辑的跨模态转换。
- **高性能 Canvas 渲染架构**：支持数千个骨架节点的同时渲染与动态位移，确保在高密度交互下的毫秒级响应。

---
*版本日期：2026年1月*  
* Smart QC Tools 开发组 归档*
